# ç¬¬ 4 ç« ï¼šPrompt Engineering

> å­¦å®Œæœ¬ç« ï¼Œä½ èƒ½ï¼šæŒæ¡ Prompt åŸºç¡€æŠ€å·§å’Œè¿›é˜¶æ–¹æ³•ï¼Œèƒ½å¯é è·å–ç»“æ„åŒ–è¾“å‡º

```mermaid
graph LR
    A["ç”¨æˆ·éœ€æ±‚"] -->|åŸºç¡€ Prompt| B["LLM"]
    B -->|ä¸å¤Ÿå‡†ç¡®ï¼Ÿ| C["è§’è‰²+ç¤ºä¾‹<br/>Few-shot"]
    C -->|éœ€è¦æ¨ç†ï¼Ÿ| D["æ€è€ƒé“¾ CoT"]
    D -->|è¦ç»“æ„åŒ–ï¼Ÿ| E["JSON Schema<br/>Structured Output"]
    
    style A fill:#e1f5fe
    style C fill:#fff3e0
    style D fill:#fff3e0
    style E fill:#c8e6c9
```

**ç« èŠ‚å¯¼è§ˆï¼š**

- **4.1 Prompt åŸºç¡€**ï¼šæŒæ¡ System/User/Assistant è§’è‰²ï¼Œå†™å‡ºé«˜è´¨é‡ Prompt
- **4.2 è¿›é˜¶æŠ€å·§**ï¼šFew-shotã€Chain-of-Thoughtã€Self-consistencyï¼Œè®©æ¨¡å‹æ›´èªæ˜
- **4.3 ç»“æ„åŒ–è¾“å‡º**ï¼šè®© LLM è¾“å‡ºå¯é çš„ JSONï¼Œæ— ç¼å¯¹æ¥ä½ çš„ä»£ç 

---

## 4.1 Prompt åŸºç¡€ <DifficultyBadge level="beginner" /> <CostBadge cost="$0.01" />

> å‰ç½®çŸ¥è¯†ï¼š1.1 ä½ çš„ç¬¬ä¸€æ¬¡ AI å¯¹è¯

ä½ çŸ¥é“å—ï¼ŸPrompt å°±åƒæ˜¯**ç»™ AI ä¸‹å•çš„èœå•**â€”â€”ä½ è¯´"æ¥ä»½ç‚’é¥­"ï¼Œå¯èƒ½ç«¯ä¸Šæ¥çš„æ˜¯è›‹ç‚’é¥­ã€ä¹Ÿå¯èƒ½æ˜¯æ‰¬å·ç‚’é¥­ï¼›ä½†å¦‚æœä½ è¯´"è¦ä¸€ä»½æ‰¬å·ç‚’é¥­ï¼ŒåŠ è™¾ä»ã€ç«è…¿ã€é’è±†ï¼Œä¸è¦è‘±ï¼Œç±³é¥­è¦è½¯ç³¯çš„"ï¼Œå¨å¸ˆå°±çŸ¥é“æ€ä¹ˆåšäº†ï¼

### ä¸ºä»€ä¹ˆéœ€è¦å®ƒï¼Ÿï¼ˆProblemï¼‰

**åŒæ ·çš„é—®é¢˜ï¼Œä¸åŒäººæé—®ï¼Œæ•ˆæœå¤©å·®åœ°åˆ«ï¼š**

**å·®çš„ Promptï¼š**

```
å†™ä¸€ä¸ªç”¨æˆ·ç®¡ç†ç³»ç»Ÿ
```

**AI å›å¤ï¼š**
> "å¥½çš„ï¼Œæˆ‘å¯ä»¥å¸®ä½ è®¾è®¡ä¸€ä¸ªç”¨æˆ·ç®¡ç†ç³»ç»Ÿã€‚ä½ éœ€è¦ä»€ä¹ˆåŠŸèƒ½å‘¢ï¼Ÿ"

**å¥½çš„ Promptï¼š**

```
ä½ æ˜¯ä¸€ä¸ªèµ„æ·±çš„ Python åç«¯å·¥ç¨‹å¸ˆã€‚

è¯·ç”Ÿæˆä¸€ä¸ªç”¨æˆ·ç®¡ç†ç³»ç»Ÿçš„ API ä»£ç ï¼Œè¦æ±‚ï¼š
- ä½¿ç”¨ FastAPI æ¡†æ¶
- å®ç° CRUD åŠŸèƒ½ï¼ˆåˆ›å»ºã€è¯»å–ã€æ›´æ–°ã€åˆ é™¤ç”¨æˆ·ï¼‰
- ç”¨æˆ·å­—æ®µï¼šid, username, email, created_at
- åŒ…å«è¾“å…¥éªŒè¯å’Œé”™è¯¯å¤„ç†
- æ·»åŠ è¯¦ç»†çš„æ³¨é‡Š

è¾“å‡ºæ ¼å¼ï¼šå®Œæ•´å¯è¿è¡Œçš„ä»£ç ï¼Œä¸è¦çœç•¥ã€‚
```

**AI å›å¤ï¼š**
> [ç›´æ¥è¾“å‡ºå®Œæ•´çš„ FastAPI ä»£ç ï¼ŒåŒ…å«æ‰€æœ‰ CRUD æ¥å£ã€Pydantic æ¨¡å‹ã€éªŒè¯é€»è¾‘]

**å·®è·çš„æ ¹æºï¼šPrompt æ˜¯ LLM çš„"ä»»åŠ¡ä¹¦"ï¼Œè´¨é‡å†³å®šè¾“å‡ºã€‚**

::: warning ç¿»è½¦ç°åœº
å¸¸è§"æƒ¨æ¡ˆ"ï¼š
1. **å¤ªæ¨¡ç³Š**ï¼š"å†™ä»£ç "ã€"ä¼˜åŒ–æ€§èƒ½"â€”â€”AIï¼šæˆ‘æ˜¯å†™ä¸ª Hello World è¿˜æ˜¯é‡æ„æ•´ä¸ªé¡¹ç›®ï¼ŸğŸ¤”
2. **ç¼ºå°‘ä¸Šä¸‹æ–‡**ï¼šä¸è¯´æ˜ä½¿ç”¨åœºæ™¯ã€æŠ€æœ¯æ ˆã€çº¦æŸæ¡ä»¶â€”â€”AIï¼šç”¨ Java è¿˜æ˜¯ Pythonï¼Ÿè¦ä¸æˆ‘ç”¨æ±‡ç¼–å†™ï¼Ÿ
3. **æ²¡æœ‰ç¤ºä¾‹**ï¼šå¤æ‚ä»»åŠ¡æ²¡æœ‰æä¾›è¾“å…¥/è¾“å‡ºç¤ºä¾‹â€”â€”AIï¼šæˆ‘çŒœä¸€çŒœä½ è¦ä»€ä¹ˆ... çŒœé”™äº†åˆ«æ€ªæˆ‘å“¦
4. **å¿½ç•¥è§’è‰²**ï¼šæ²¡æœ‰ç”¨ system æ¶ˆæ¯å®šä¹‰ AI çš„ä¸“ä¸šèº«ä»½â€”â€”AIï¼šæˆ‘æ˜¯è¯¥å½“æ•™æˆè¿˜æ˜¯å½“æ®µå­æ‰‹ï¼Ÿ
:::

::: tip ä¸€å¥è¯æ€»ç»“
**Prompt å†™å¾—å¥½ï¼ŒAI æ‰èƒ½è·‘ã€‚è¯¦ç»†çš„æŒ‡ä»¤ = é è°±çš„è¾“å‡ºï¼**
:::

### å®ƒæ˜¯ä»€ä¹ˆï¼Ÿï¼ˆConceptï¼‰

**Prompt æ˜¯ä½ ç»™ LLM çš„æŒ‡ä»¤**ï¼Œç”±ä¸‰ç§è§’è‰²çš„æ¶ˆæ¯ç»„æˆã€‚æƒ³è±¡ä¸€ä¸‹ï¼š

- **System Message** = ç»™ AI å‘çš„"å·¥ç‰Œ"ï¼šä½ æ˜¯ä¸“å®¶/å¯¼å¸ˆ/åŠ©æ‰‹ï¼Ÿ
- **User Message** = ä½ çš„ä»»åŠ¡å•ï¼šæˆ‘è¦åšä»€ä¹ˆï¼Ÿ
- **Assistant Message** = AI çš„å·¥ä½œè®°å½•ï¼šä¸Šæ¬¡èŠäº†å•¥ï¼Ÿ

è¿™å°±åƒæ˜¯å¼€ä¼šï¼šSystem å®šä¹‰è°å‚ä¼šï¼ˆæŠ€æœ¯ä¸“å®¶è¿˜æ˜¯äº§å“ç»ç†ï¼‰ï¼ŒUser æéœ€æ±‚ï¼ŒAssistant è®°å½•è®¨è®ºå†å²ã€‚

```mermaid
graph LR
    A["System Message<br/>ï¼ˆè§’è‰²å®šä¹‰ï¼‰"] --> D["LLM Context"]
    B["User Message<br/>ï¼ˆç”¨æˆ·è¾“å…¥ï¼‰"] --> D
    C["Assistant Message<br/>ï¼ˆAI å›å¤ï¼‰"] --> D
    D --> E["ç”Ÿæˆä¸‹ä¸€æ¡<br/>Assistant å›å¤"]
    
    style A fill:#e1ffe1
    style B fill:#e1f5ff
    style C fill:#fff4e1
```

**ä¸‰ç§è§’è‰²çš„ä½œç”¨ï¼š**

| è§’è‰² | ä½œç”¨ | ç¤ºä¾‹ |
|-----|------|------|
| **system** | è®¾å®š AI çš„èº«ä»½ã€ä¸“ä¸šé¢†åŸŸã€å›å¤é£æ ¼ | "ä½ æ˜¯ä¸€ä¸ªèµ„æ·± Python å¼€å‘è€…ï¼Œæ“…é•¿å†™ç®€æ´é«˜æ•ˆçš„ä»£ç " |
| **user** | ç”¨æˆ·çš„é—®é¢˜æˆ–æŒ‡ä»¤ | "å¸®æˆ‘å†™ä¸€ä¸ªå¿«é€Ÿæ’åºç®—æ³•" |
| **assistant** | AI çš„å†å²å›å¤ï¼ˆç”¨äºå¤šè½®å¯¹è¯ï¼‰ | "å¥½çš„ï¼Œè¿™æ˜¯å¿«é€Ÿæ’åºçš„å®ç°..." |

**ä¸ºä»€ä¹ˆéœ€è¦ system æ¶ˆæ¯ï¼Ÿ**

System æ¶ˆæ¯ç›¸å½“äº"å²—ä½è¯´æ˜ä¹¦"ï¼Œè®© AI è¿›å…¥ç‰¹å®šçš„ä¸“ä¸šè§’è‰²ã€‚å¯¹æ¯”æ•ˆæœï¼š

::: tip System æ¶ˆæ¯çš„é­”åŠ›
åŒæ ·çš„é—®é¢˜ï¼Œä¸åŒçš„ System è§’è‰²ï¼Œå›ç­”é£æ ¼å¤©å·®åœ°åˆ«ï¼
- æ—  System = æ•™ç§‘ä¹¦æ¨¡å¼ï¼ˆæ— èŠä½†æ­£ç¡®ï¼‰
- System: ä¸“å®¶ = å­¦æœ¯æ´¾ï¼ˆä¸¥è°¨ä½†éš¾æ‡‚ï¼‰  
- System: å¯¼å¸ˆ = æ¥åœ°æ°”ï¼ˆç”ŸåŠ¨æ˜“æ‡‚ï¼‰

**è®°ä½ï¼šç»™ AI å‘å·¥ç‰Œï¼Œå®ƒæ‰çŸ¥é“è¯¥æ€ä¹ˆè¡¨ç°ï¼**
:::

**æ²¡æœ‰ system æ¶ˆæ¯ï¼š**

```python
messages = [
    {"role": "user", "content": "è§£é‡Šä»€ä¹ˆæ˜¯é—­åŒ…"}
]
```

**AI å›å¤ï¼š**
> "é—­åŒ…æ˜¯å‡½æ•°å’Œå…¶å‘¨å›´çŠ¶æ€çš„å¼•ç”¨æ†ç»‘åœ¨ä¸€èµ·çš„ç»„åˆ..."ï¼ˆæ•™ç§‘ä¹¦å¼å®šä¹‰ï¼ŒæŠ½è±¡ï¼‰

**æœ‰ system æ¶ˆæ¯ï¼š**

```python
messages = [
    {"role": "system", "content": "ä½ æ˜¯ä¸€ä¸ªè€å¿ƒçš„ç¼–ç¨‹å¯¼å¸ˆï¼Œæ“…é•¿ç”¨ç”Ÿæ´»ä¸­çš„ä¾‹å­è§£é‡ŠæŠ€æœ¯æ¦‚å¿µï¼Œç›®æ ‡å—ä¼—æ˜¯åˆå­¦è€…ã€‚"},
    {"role": "user", "content": "è§£é‡Šä»€ä¹ˆæ˜¯é—­åŒ…"}
]
```

**AI å›å¤ï¼š**
> "æƒ³è±¡ä½ åœ¨ä¸€ä¸ªå’–å•¡åº—å·¥ä½œï¼Œä½ çš„å·¥ä½œæ˜¯è®°å½•æ¯ä¸ªé¡¾å®¢çš„è®¢å•ç¼–å·ã€‚æ¯æ¬¡æœ‰æ–°é¡¾å®¢æ¥ï¼Œç¼–å·å°± +1...
> 
> é—­åŒ…å°±åƒè¿™ä¸ªåœºæ™¯ï¼šå‡½æ•°è®°ä½äº†å¤–éƒ¨çš„'ç¼–å·è®¡æ•°å™¨'ï¼Œå³ä½¿å’–å•¡åº—æ‰“çƒŠäº†ï¼ˆå¤–éƒ¨å‡½æ•°æ‰§è¡Œå®Œï¼‰ï¼Œè¿™ä¸ªè®¡æ•°å™¨ä¾ç„¶å­˜åœ¨..."

**é«˜è´¨é‡ Prompt çš„è¦ç´ ï¼š**

```mermaid
graph TD
    A["é«˜è´¨é‡ Prompt"] --> B["1. æ˜ç¡®çš„è§’è‰²<br/>system æ¶ˆæ¯"]
    A --> C["2. å…·ä½“çš„æŒ‡ä»¤<br/>ä¸è¯´'å†™ä»£ç '<br/>è¯´'ç”¨FastAPIå†™CRUD'"]
    A --> D["3. æä¾›ä¸Šä¸‹æ–‡<br/>æŠ€æœ¯æ ˆ/çº¦æŸæ¡ä»¶"]
    A --> E["4. æ ¼å¼è¦æ±‚<br/>ä»£ç /JSON/è¡¨æ ¼"]
    A --> F["5. ç¤ºä¾‹ï¼ˆå¯é€‰ï¼‰<br/>Few-shot learning"]
    
    style A fill:#c8e6c9
```

**å¸¸è§ Prompt æŠ€å·§ï¼š**

| æŠ€å·§ | è¯´æ˜ | ç¤ºä¾‹ |
|-----|------|------|
| **å…·ä½“åŒ–** | é¿å…æ¨¡ç³Šè¯ï¼Œç»™å‡ºæ˜ç¡®æŒ‡æ ‡ | âŒ "å†™ç®€æ´çš„ä»£ç " â†’ âœ… "å‡½æ•°ä¸è¶…è¿‡20è¡Œï¼Œå˜é‡åç”¨è‹±æ–‡" |
| **ç»™å‡ºçº¦æŸ** | æ˜ç¡®ä¸è¦ä»€ä¹ˆ | "ä¸è¦ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“ï¼Œåªç”¨ Python æ ‡å‡†åº“" |
| **åˆ†æ­¥æŒ‡ä»¤** | å¤æ‚ä»»åŠ¡æ‹†è§£æˆæ­¥éª¤ | "ç¬¬ä¸€æ­¥ï¼šæå–å­—æ®µï¼›ç¬¬äºŒæ­¥ï¼šéªŒè¯æ ¼å¼ï¼›ç¬¬ä¸‰æ­¥ï¼šä¿å­˜æ•°æ®åº“" |
| **è¾“å‡ºæ ¼å¼** | æ˜ç¡®è¿”å›ç»“æ„ | "ä»¥ JSON æ ¼å¼è¿”å›ï¼ŒåŒ…å« nameã€ageã€email å­—æ®µ" |
| **æ€è€ƒè¿‡ç¨‹** | è¦æ±‚å…ˆåˆ†æå†å›ç­” | "å…ˆåˆ†æè¿™æ®µä»£ç çš„æ—¶é—´å¤æ‚åº¦ï¼Œå†æå‡ºä¼˜åŒ–å»ºè®®" |

**å¸¸è§é™·é˜±ï¼š**

::: warning é¿å‘æŒ‡å—
| é™·é˜± | é—®é¢˜ | æ”¹è¿› |
|-----|------|------|
| **å‘½ä»¤å¼ vs æè¿°å¼** | "ç”Ÿæˆä»£ç "ï¼ˆå¤ªç›´æ¥ï¼‰ | "ä½ æ˜¯åç«¯ä¸“å®¶ï¼Œå¸®æˆ‘ç”¨ FastAPI å®ç°..."ï¼ˆæœ‰è§’è‰²æ„Ÿï¼‰ |
| **ä¸€æ¬¡é—®å¤ªå¤š** | ä¸€ä¸ª prompt é—® 10 ä¸ªé—®é¢˜ï¼ˆAI ä¼šæ‡µï¼‰ | æ‹†åˆ†æˆå¤šè½®å¯¹è¯ï¼ˆä¸€æ¬¡ä¸€ä¸ªé‡ç‚¹ï¼‰ |
| **å¿½ç•¥æ ¼å¼** | ä¸è¯´æ˜è¾“å‡ºæ ¼å¼ï¼ˆè¿”å›ä¸€å¨æ–‡å­—ï¼‰ | "ä»¥ Markdown è¡¨æ ¼å½¢å¼è¾“å‡º"ï¼ˆç»“æ„æ¸…æ™°ï¼‰ |
| **è¿‡åº¦ä¾èµ–** | æŠŠæ‰€æœ‰é€»è¾‘äº¤ç»™ AIï¼ˆå®¹æ˜“è·‘åï¼‰ | ç»™å‡ºæ¸…æ™°çš„ä¸šåŠ¡è§„åˆ™å’Œè¾¹ç•Œæ¡ä»¶ï¼ˆAI ä¸ä¼šè¯»å¿ƒæœ¯ï¼‰ |
:::

::: tip ä¸€å¥è¯æ€»ç»“
**æŠŠ AI å½“æ–°å‘˜å·¥ï¼šç»™è§’è‰²ã€ç»™èŒƒä¾‹ã€ç»™çº¦æŸï¼Œå®ƒæ‰èƒ½å¹²å¥½æ´»ï¼**
:::

### åŠ¨æ‰‹è¯•è¯•ï¼ˆPracticeï¼‰

æˆ‘ä»¬é€šè¿‡å¯¹æ¯”å®éªŒï¼Œçœ‹çœ‹ä¸åŒ Prompt çš„æ•ˆæœå·®å¼‚ã€‚

**å®éªŒ 1ï¼šå¯¹æ¯”"å·® Prompt" vs "å¥½ Prompt"**

```python
from openai import OpenAI

client = OpenAI()

# å·®çš„ Prompt
bad_prompt = "å†™ä¸€ä¸ªå‡½æ•°è®¡ç®—æ–æ³¢é‚£å¥‘æ•°åˆ—"

response = client.chat.completions.create(
    model="gpt-4.1-mini",
    messages=[{"role": "user", "content": bad_prompt}],
)
print("=== å·®çš„ Prompt ===")
print(response.choices[0].message.content)

# å¥½çš„ Prompt
good_prompt = """
ä½ æ˜¯ä¸€ä¸ª Python ç®—æ³•ä¸“å®¶ï¼Œæ“…é•¿å†™é«˜æ€§èƒ½ä»£ç ã€‚

ä»»åŠ¡ï¼šå®ç°æ–æ³¢é‚£å¥‘æ•°åˆ—è®¡ç®—å‡½æ•°

è¦æ±‚ï¼š
1. ä½¿ç”¨åŠ¨æ€è§„åˆ’ï¼ˆé¿å…é€’å½’ï¼‰
2. æ—¶é—´å¤æ‚åº¦ O(n)ï¼Œç©ºé—´å¤æ‚åº¦ O(1)
3. å‡½æ•°ç­¾åï¼šdef fibonacci(n: int) -> int
4. åŒ…å«å‚æ•°éªŒè¯ï¼ˆn >= 0ï¼‰
5. æ·»åŠ ç±»å‹æ³¨è§£å’Œæ–‡æ¡£å­—ç¬¦ä¸²
6. åŒ…å« 3 ä¸ªæµ‹è¯•ç”¨ä¾‹

è¾“å‡ºï¼šå®Œæ•´çš„ Python ä»£ç ï¼Œå¯ç›´æ¥è¿è¡Œã€‚
"""

response = client.chat.completions.create(
    model="gpt-4.1-mini",
    messages=[{"role": "user", "content": good_prompt}],
)
print("\n=== å¥½çš„ Prompt ===")
print(response.choices[0].message.content)
```

**å®éªŒ 2ï¼šSystem æ¶ˆæ¯çš„é­”åŠ›**

```python
from openai import OpenAI

client = OpenAI()

question = "è§£é‡Šä»€ä¹ˆæ˜¯ API"

# æ²¡æœ‰ system æ¶ˆæ¯
response1 = client.chat.completions.create(
    model="gpt-4.1-mini",
    messages=[{"role": "user", "content": question}],
)
print("=== æ—  System æ¶ˆæ¯ï¼ˆé»˜è®¤ï¼‰ ===")
print(response1.choices[0].message.content)

# æŠ€æœ¯ä¸“å®¶è§’è‰²
response2 = client.chat.completions.create(
    model="gpt-4.1-mini",
    messages=[
        {"role": "system", "content": "ä½ æ˜¯ä¸€ä¸ªä¸¥è°¨çš„è®¡ç®—æœºç§‘å­¦æ•™æˆï¼Œç”¨å­¦æœ¯è¯­è¨€è§£é‡Šæ¦‚å¿µã€‚"},
        {"role": "user", "content": question},
    ],
)
print("\n=== System: æŠ€æœ¯ä¸“å®¶ ===")
print(response2.choices[0].message.content)

# å¹½é»˜å¯¼å¸ˆè§’è‰²
response3 = client.chat.completions.create(
    model="gpt-4.1-mini",
    messages=[
        {"role": "system", "content": "ä½ æ˜¯ä¸€ä¸ªå¹½é»˜çš„ç¼–ç¨‹å¯¼å¸ˆï¼Œå–œæ¬¢ç”¨ç±»æ¯”å’Œç¬‘è¯è§£é‡ŠæŠ€æœ¯æ¦‚å¿µï¼Œç›®æ ‡å—ä¼—æ˜¯å°å­¦ç”Ÿã€‚"},
        {"role": "user", "content": question},
    ],
)
print("\n=== System: å¹½é»˜å¯¼å¸ˆ ===")
print(response3.choices[0].message.content)
```

**å®éªŒ 3ï¼šPrompt æ¨¡æ¿å®æˆ˜**

ä¸ºå¸¸è§ä»»åŠ¡åˆ›å»ºå¯å¤ç”¨çš„ Prompt æ¨¡æ¿ï¼š

```python
from openai import OpenAI

client = OpenAI()

# ä»£ç å®¡æŸ¥æ¨¡æ¿
def code_review_prompt(code: str, language: str = "Python"):
    return f"""
ä½ æ˜¯ä¸€ä¸ªèµ„æ·±çš„ {language} ä»£ç å®¡æŸ¥ä¸“å®¶ï¼Œæ“…é•¿å‘ç°ä»£ç ä¸­çš„é—®é¢˜å¹¶æå‡ºæ”¹è¿›å»ºè®®ã€‚

è¯·å®¡æŸ¥ä»¥ä¸‹ä»£ç ï¼Œå¹¶æŒ‰è¿™ä¸ªç»“æ„è¾“å‡ºï¼š

1. **ä»£ç è´¨é‡è¯„åˆ†**ï¼ˆ1-10 åˆ†ï¼‰
2. **å‘ç°çš„é—®é¢˜**ï¼ˆæŒ‰ä¸¥é‡ç¨‹åº¦æ’åºï¼‰
   - æ¯ä¸ªé—®é¢˜è¯´æ˜ï¼šé—®é¢˜ + å½±å“ + å»ºè®®ä¿®æ”¹
3. **ä¼˜ç‚¹**
4. **æ”¹è¿›åçš„ä»£ç **ï¼ˆå¯é€‰ï¼Œå¦‚æœæœ‰é‡å¤§é—®é¢˜ï¼‰

ä»£ç ï¼š
```{language.lower()}
{code}
```

è¯·ç»™å‡ºè¯¦ç»†åˆ†æã€‚
"""

# æµ‹è¯•
code = '''
def process_users(users):
    result = []
    for user in users:
        if user['age'] > 18:
            result.append(user['name'])
    return result
'''

response = client.chat.completions.create(
    model="gpt-4.1-mini",
    messages=[{"role": "user", "content": code_review_prompt(code)}],
)
print(response.choices[0].message.content)
```

**å®éªŒ 4ï¼šå¤šè½®å¯¹è¯ä¸­çš„ä¸Šä¸‹æ–‡ç®¡ç†**

```python
from openai import OpenAI

client = OpenAI()

# åˆå§‹åŒ–å¯¹è¯
messages = [
    {"role": "system", "content": "ä½ æ˜¯ä¸€ä¸ª Python ç¼–ç¨‹åŠ©æ‰‹ï¼Œæ“…é•¿è°ƒè¯•ä»£ç ã€‚"}
]

def chat(user_input):
    messages.append({"role": "user", "content": user_input})
    response = client.chat.completions.create(
        model="gpt-4.1-mini",
        messages=messages,
    )
    reply = response.choices[0].message.content
    messages.append({"role": "assistant", "content": reply})
    return reply

# ç¬¬ä¸€è½®ï¼šæå‡ºé—®é¢˜
print("ç”¨æˆ·: è¿™æ®µä»£ç æœ‰ä»€ä¹ˆé—®é¢˜ï¼Ÿ\n```python\nfor i in range(10):\n  print(i)\ntime.sleep(1)\n```")
print(f"AI: {chat('è¿™æ®µä»£ç æœ‰ä»€ä¹ˆé—®é¢˜ï¼Ÿ\\n```python\\nfor i in range(10):\\n  print(i)\\ntime.sleep(1)\\n```')}\n")

# ç¬¬äºŒè½®ï¼šè¿½é—®ï¼ˆAI ä¼šè®°ä½å‰é¢çš„ä»£ç ï¼‰
print("ç”¨æˆ·: é‚£æˆ‘åº”è¯¥æ€ä¹ˆå¯¼å…¥ time æ¨¡å—ï¼Ÿ")
print(f"AI: {chat('é‚£æˆ‘åº”è¯¥æ€ä¹ˆå¯¼å…¥ time æ¨¡å—ï¼Ÿ')}\n")

# ç¬¬ä¸‰è½®ï¼šç»§ç»­è¿½é—®
print("ç”¨æˆ·: æœ‰æ²¡æœ‰æ›´ä¼˜é›…çš„å†™æ³•ï¼Ÿ")
print(f"AI: {chat('æœ‰æ²¡æœ‰æ›´ä¼˜é›…çš„å†™æ³•ï¼Ÿ')}")
```

<ColabBadge path="demos/04-prompt-engineering/prompt_basics.ipynb" />

### å°ç»“ï¼ˆReflectionï¼‰

::: tip ä¸€å¥è¯æ€»ç»“
**System æ¶ˆæ¯ = å·¥ç‰Œï¼ŒUser æ¶ˆæ¯ = ä»»åŠ¡å•ï¼Œè¶Šè¯¦ç»†è¶Šé è°±ï¼**
:::

- **è§£å†³äº†ä»€ä¹ˆ**ï¼šå­¦ä¼šå†™é«˜è´¨é‡ Promptï¼Œé€šè¿‡ system æ¶ˆæ¯æ§åˆ¶ AI è§’è‰²ï¼Œç†è§£ä¸‰ç§æ¶ˆæ¯ç±»å‹çš„ä½œç”¨
- **æ²¡è§£å†³ä»€ä¹ˆ**ï¼šç®€å•çš„ Prompt å¯ä»¥åº”å¯¹å¸¸è§„ä»»åŠ¡ï¼Œä½†å¤æ‚ä»»åŠ¡ï¼ˆåˆ†ç±»ã€æ¨ç†ï¼‰æ€ä¹ˆåŠï¼Ÿâ€”â€”ä¸‹ä¸€èŠ‚ä»‹ç»è¿›é˜¶æŠ€å·§
- **å…³é”®è¦ç‚¹**ï¼š
  1. **System æ¶ˆæ¯å®šä¹‰è§’è‰²**ï¼šä¸“å®¶ vs å¯¼å¸ˆ vs åŠ©æ‰‹ï¼Œæ•ˆæœå®Œå…¨ä¸åŒ
  2. **å…·ä½“åŒ–æŒ‡ä»¤**ï¼šä¸è¯´"å†™ä»£ç "ï¼Œè¯´"ç”¨ FastAPI å®ç° CRUD"
  3. **æä¾›ä¸Šä¸‹æ–‡**ï¼šæŠ€æœ¯æ ˆã€çº¦æŸæ¡ä»¶ã€è¾“å‡ºæ ¼å¼
  4. **å¤šè½®å¯¹è¯éœ€è¦æ‰‹åŠ¨ç®¡ç†å†å²æ¶ˆæ¯**ï¼šAPI æ˜¯æ— çŠ¶æ€çš„
  5. **ç”¨æ¨¡æ¿æé«˜æ•ˆç‡**ï¼šä¸ºå¸¸è§ä»»åŠ¡å»ºç«‹å¯å¤ç”¨çš„ Prompt æ¨¡æ¿

::: warning æˆæœ¬æç¤º
å¤šè½®å¯¹è¯ä¼šç´¯ç§¯ token æ•°é‡ï¼Œå®šæœŸæ¸…ç†å†å²æ¶ˆæ¯å¯ä»¥èŠ‚çœæˆæœ¬ï¼
:::

---

*æœ€åæ›´æ–°ï¼š2026-02-20*
